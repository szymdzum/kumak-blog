---
import Head from "@components/Head.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";

import Hero from "@components/hero/Hero.astro";
import Projects from "@components/Projects.astro";
import PostPreview from "@components/blog/PostPreview.astro";
import { getCollection } from "astro:content";
import { PostsManager } from "../utils/postSorter";

const limit = 9;
const allPosts = await getCollection("blog");
const latestPosts = PostsManager.getLatest(allPosts, limit);
---

<!doctype html>
<html lang="en">
  <Head />
  <body>
    <Header />
    <main>
      <Hero />
      <section>
        {latestPosts.map((post) => <PostPreview post={post} />)}
      </section>
      <Projects />
      <Footer />
    </main>
  </body>
</html>
